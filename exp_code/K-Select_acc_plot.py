import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

# 创建新数据矩阵
new_data = {
    'k': [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25, 27, 29],
    'p0': [91.334, 96.429, 97.267, 97.414, 98.182, 97.621, 98.432, 98.561, 98.673, 98.886, 98.964, 98.961, 98.915, 98.897, 99.01],
    'p2': [90.644, 96.435, 97.2, 97.669, 97.758, 98.725, 98.535, 99.002, 99.013, 98.924, 98.813, 98.477, 98.868, 98.993, 98.866],
    'p4': [90.518, 95.188, 97.176, 97.068, 96.639, 97.546, 98.549, 98.673, 98.591, 98.913, 98.871, 98.753, 98.935, 98.88, 99.124],
    'p6': [90.668, 96.219, 96.84, 98.087, 97.804, 97.944, 98.819, 98.855, 98.94, 98.792, 99.253, 98.486, 99.013, 98.888, 99.019],
    'p8': [91.579, 96.168, 96.952, 97.035, 97.844, 98.468, 98.552, 98.624, 98.777, 98.674, 99.102, 99.23, 98.842, 99.255, 99.32],
    'p10': [91.506, 95.373, 97.630, 97.111, 98.139, 98.046, 98.844, 98.920, 98.384, 99.118, 98.786, 99.111, 99.013, 98.831, 99.108],
    'p20': [90.712, 96.105, 97.313, 96.844, 98.077, 98.517, 98.810, 98.931, 99.042, 98.502, 98.646, 98.479, 98.913, 98.851, 98.906],
    'p30': [90.372, 93.785, 96.900, 97.684, 97.926, 98.261, 98.873, 99.018, 99.127, 99.082, 98.989, 98.922, 99.160, 99.258, 99.093],
    'p40': [91.231, 95.067, 97.376, 97.787, 97.999, 97.728, 98.300, 98.588, 98.835, 98.949, 99.131, 99.004, 99.010, 98.982, 99.102],
    'p50': [90.475, 94.756, 96.722, 97.560, 97.395, 98.846, 98.460, 98.715, 98.266, 98.142, 98.497, 98.833, 99.006, 98.591, 98.522]
}

# 创建 DataFrame
df_new = pd.DataFrame(new_data)

# 计算平均值和标准差
df_new['mean'] = df_new[['p0', 'p2', 'p4', 'p6', 'p8', 'p10', 'p20', 'p30', 'p40', 'p50']].mean(axis=1)
df_new['std'] = df_new[['p0', 'p2', 'p4', 'p6', 'p8', 'p10', 'p20', 'p30', 'p40', 'p50']].std(axis=1)

# 绘制折线图和误差带
plt.figure(figsize=(6, 4),dpi=300)
plt.plot(df_new['k'], df_new['mean'], '-o', label='Mean select_acc')
plt.fill_between(df_new['k'], df_new['mean'] - df_new['std'], df_new['mean'] + df_new['std'], color='b', alpha=0.2, label='Standard Deviation')
plt.xlabel('K')
plt.ylabel('select_acc')
plt.grid(True)

# 设置 x 轴刻度标签只显示 k 的值
plt.xticks(df_new['k'])

# 设置 y 轴刻度步进为 1
plt.yticks(np.arange(90, 101, 1))
plt.ylim((90, 100))

# 去除边界空白
plt.tight_layout()

# 保存图像为 k_select_acc_new.jpg，DPI 设置为 300
plt.savefig('k_select_acc_new.jpg', dpi=300)

plt.show()